{% extends "layout.html" %} 
{% block content %}
{% if car_data is defined and car_data|length > 0 %}
<div class="container-fluid py-4">
	<!-- Row 1 -->
	<div class="row">
		<!-- Col 1 -->
		<div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
			<div class="card">
				<div class="card-body p-3">
					<div class="row">
						<div class="col-8">
							<div class="numbers">
								<p class="text-sm mb-0 text-capitalize font-weight-bold">Connectivity</p>
								<h5 class="font-weight-bolder mb-0">
									<b>Connected</b>
								</h5>
							</div>
						</div>
						<div class="col-4 text-end">
							<div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md" style="height: 55px; width: 55px; display: flex; justify-content: center; align-items: center; background: #131414" object-fit: cover;>
								<h2><i class="fas fa-wifi" style="color: white;"></i></h2>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Col 2  -->
		<div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
			<div class="card">
				<div class="card-body p-3">
					<div class="row">
						<div class="col-8">
							<div class="numbers">
								<p class="text-sm mb-0 text-capitalize font-weight-bold">Current Speed</p>
								<h5 class="font-weight-bolder mb-0">
									<b>{{car_data[0].current_speed}}km/h</b>
								</h5>
							</div>
						</div>
          	<div class="col-4 text-end">
          		<div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md" style="height: 55px; width: 55px; display: flex; justify-content: center; align-items: center; background: #131414">
              		<h2><i class="bi bi-speedometer" style="color: white;"></i></h2>
            	</div>
            </div>
					</div>
				</div>
			</div>
		</div>
	
		<!-- Col 3 -->
		<div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
			<div class="card">
				<div class="card-body p-3">
					<div class="row">
						<div class="col-8">
							<div class="numbers">
								<p class="text-sm mb-0 text-capitalize font-weight-bold">Current Temps</p>
								<h5 class="font-weight-bolder mb-0">
									<b>{{car_data[0].current_temps}}Â°C</b>
								</h5>
							</div>
						</div>
          	<div class="col-4 text-end">
							<div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md" style="height: 55px; width: 55px; display: flex; justify-content: center; align-items: center; background: #131414">
          		<h2><i class="bi bi-thermometer-half" style="color: white;"></i></h2>
            	</div>
            </div>
					</div>
				</div>
			</div>
		</div>
	
		<!-- Col 4  -->
		<div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
			<div class="card">
				<div class="card-body p-3">
					<div class="row">
						<div class="col-8">
							<div class="numbers">
								<p class="text-sm mb-0 text-capitalize font-weight-bold">Distance Travelled</p>
								<h5 class="font-weight-bolder mb-0">
									<b>{{car_data[0].total_dist}}cm</b>
								</h5>
							</div>
						</div>
          	<div class="col-4 text-end">
							<div class="icon icon-shape bg-gradient-primary shadow text-center border-radius-md" style="height: 55px; width: 55px; display: flex; justify-content: center; align-items: center; background: #131414">
              		<h2><i class="bi bi-map-fill" style="color: white;"></i></h2>
            	</div>
            </div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Row 2 -->
	<div class="row mt-4">
		<!-- Col 1 -->
	  	<div class="col-lg-7 mb-lg-0 mb-4">
	 		<div class="card">
				<div class="card-body p-3">
	        		<div class="row">
	        			<div class="col-lg-6">
	        				<div class="d-flex flex-column h-100">
	        					<p class="mb-1 pt-2 text-bold">Built by the Bumbling Pandas</p>
	        					 <h5 class="font-weight-bolder"><b>UI Dashboard</b></h5>
	        					 <p class="mb-5">Statistics sent by the car via HTTP POST requests are displayed here.</p>
	     					</div>
	     				</div>
               	<div class="col-lg-5 ms-auto text-center mt-5 mt-lg-0">
                  	<div class="bg-gradient-primary border-radius-lg h-100">
                      		<img class="w-100 position-relative z-index-2 pt-4" src="{{ url_for('static', filename='/img/panda.jpg')}}" alt="panda" style="height: 190px; width: 40px">
                  	</div>
                	</div>
	     			</div>
	     		</div>
	     	</div>
     	</div>

		 <!-- Col 2 -->
		<div class="col-lg-5">
			<div class="card h-100 p-3">
				<div class="overflow-hidden position-relative border-radius-lg bg-cover h-100" style="background-image: url('{{ url_for("static", filename="/img/robotics1.jpg")}}'); background-repeat: no-repeat;">
					<span class="mask bg-gradient-dark"></span>

              	<div class="card-body position-relative z-index-1 d-flex flex-column h-100 p-3">
               	<h5 class="text-white font-weight-bolder mb-4 pt-2"><b>Car Description</b></h5>
               	<p class="text-white">Bobby is a car that is powered by a MSP432 and 4x double AA batteries.</p>
              	</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Row 3 -->
	<div class="row mt-4">
		<!-- Col 1 -->
	  	<div class="col-lg-5 mb-lg-0 mb-4">
	 		<div class="card">
				<div class="card-body p-3">
	        		<div class="row">
	        			<h6 class="text-black font-weight-bolder mb-4 pt-2"><b>Temperature Chart</b></h6>
	        			<div class="col-lg-12">
	        				<canvas id="temp_chart" width="400" height="210"></canvas>
	     				</div>
	     			</div>
	     		</div>
	     	</div>
     	</div>

		 <!-- Col 2 -->
	  	<div class="col-lg-7 mb-lg-0 mb-4">
	 		<div class="card">
				<div class="card-body p-3">
	        		<div class="row">
	        			<h6 class="text-black font-weight-bolder mb-4 pt-2"><b>Speed Chart</b></h6>
	        			<div class="col-lg-12">
	        				<canvas id="speed_chart" width="400" height="210"></canvas>
	     				</div>
	     			</div>
	     		</div>
	     	</div>
     	</div>
	</div>

	<!-- Row 4 -->
	<div class="row mt-4">
		<!-- Col 1 -->
	  	<div class="col-lg-7 mb-lg-0 mb-4">
	 		<div class="card">
				<div class="card-body p-3">
	        		<div class="row">
	        			<h6 class="text-black font-weight-bolder mb-4 pt-2"><b>Line Detection Count Chart</b></h6>
	        			<div class="col-lg-12">
	        				<canvas id="line_detect_count_chart" width="400" height="210"></canvas>
	     				</div>
	     			</div>
	     		</div>
	     	</div>
     	</div>

		<!-- Col 2 -->
	  	<div class="col-lg-5 mb-lg-0 mb-4">
	 		<div class="card">
				<div class="card-body p-3">
	        		<div class="row">
	        			<h6 class="text-black font-weight-bolder mb-4 pt-2"><b>Line Detection Rate Chart</b></h6>
	        			<div class="col-lg-12">
	        				<canvas id="line_detect_chart" width="400" height="210"></canvas>
	     				</div>
	     			</div>
	     		</div>
	     	</div>
     	</div>
	</div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.0/chart.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.0/chart.esm.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.0/chart.esm.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.0/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.0/helpers.esm.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.0/helpers.esm.min.js"></script>
<script src="{{ url_for('static', filename='dashboard.js')}}"></script>
<script>
	createTempChart(JSON.parse('{{ car_data[1] | tojson | safe}}'));
	createSpeedChart(JSON.parse('{{ car_data[2] | tojson | safe}}'));
	createLineDetectCountChart(JSON.parse('{{ car_data[4] | tojson | safe}}'));
	createLineDetectGraph(JSON.parse('{{ car_data[3] | tojson | safe}}'));
</script>

{% else %}
<div class="alert alert-danger" role="alert">
	<i class="fas fa-exclamation-triangle"></i> Error! There are no data to be displayed in the dashboard! 
</div>
{% endif %}
{% endblock %}